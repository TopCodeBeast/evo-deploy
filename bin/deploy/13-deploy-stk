#!/usr/bin/env bash

set -e

. $(PWD)/bin/init

rewardsToken=$TOKEN_ERC20_RING
stakingRewardsGenesis=$(seth block "latest" timestamp)
stakingRewardsGenesis=$(bc <<< "$stakingRewardsGenesis + 1 * 60")
# stakingRewardsGenesis=1626746400
STAKINGREWARDSFACTORY=$(dappCreate staker src/StakingRewardsFactory.sol:StakingRewardsFactory "$rewardsToken" "$stakingRewardsGenesis")
sleep 3s

TOKEN_LP_FIRE_RING="$(loadConf ".furnace.lpFIRE")" 
TOKEN_LP_GOLD_RING="$(loadConf ".furnace.lpGOLD")" 
TOKEN_LP_SOIL_RING="$(loadConf ".furnace.lpSOIL")" 
TOKEN_LP_WATER_RING="$(loadConf ".furnace.lpWATER")" 
TOKEN_LP_WOOD_RING="$(loadConf ".furnace.lpWOOD")" 
TOKEN_LP_WETH_RING="$(loadConf ".staker.lpWETH")" 
stakingTokens=("$TOKEN_LP_GOLD_RING" "$TOKEN_LP_WOOD_RING" "$TOKEN_LP_WATER_RING" "$TOKEN_LP_FIRE_RING" "$TOKEN_LP_SOIL_RING" "$TOKEN_LP_WETH_RING")
for stakingToken in "${stakingTokens[@]}"; do
  echo $stakingToken
  seth send $STAKINGREWARDSFACTORY "deploy(address)" "$stakingToken" 
  sleep 3s
done

