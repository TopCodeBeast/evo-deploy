#!/usr/bin/env bash

set -e

. $(PWD)/bin/init

GENESCIENCEV8=$(seth send --create 608060405234801561001057600080fd5b50604051602080612390833981016040525160008054600160a060020a03909216600160a060020a031990921691909117905561233e806100526000396000f3006080604052600436106101b35763ffffffff60e060020a60003504166304cc26ee81146101b857806308217f8d146101df57806316409887146102185780632094b4911461022d5780632133bbcf14610248578063230b7adc1461025d5780633133f0841461027257806334cddc83146102875780633a0d42441461029c5780634685b62a146102cb57806347358822146102e0578063572e3543146102fb5780635d4a2f92146103105780635fb1900b146103255780636bf79fd11461033a57806378a6bd571461034f578063795f8752146103675780637b1039991461038b5780637fb2c9d9146103bc57806382357892146103d15780638b7ee7e4146103e65780638d8b1b88146103fb5780639da0968a14610416578063a1c1d1b11461042e578063a22709e414610449578063a8dc03591461045e578063b623d5c414610473578063b72c7fd41461049a578063b863bd37146104af578063bef2613a146104c7578063d12710b2146104dc578063d47e5af614610525578063dd87c7c21461053a578063deb8b96d14610552578063e707bbf614610567578063ece43eb214610588578063f36a079b1461059d575b600080fd5b3480156101c457600080fd5b506101cd6105b2565b60408051918252519081900360200190f35b3480156101eb57600080fd5b506101fa6004356024356105d6565b60408051938452602084019290925282820152519081900360600190f35b34801561022457600080fd5b506101cd61067c565b34801561023957600080fd5b506101cd6004356024356106a0565b34801561025457600080fd5b506101cd6106b8565b34801561026957600080fd5b506101cd6106dc565b34801561027e57600080fd5b506101cd610700565b34801561029357600080fd5b506101cd610724565b3480156102a857600080fd5b506102b7600435602435610748565b604080519115158252519081900360200190f35b3480156102d757600080fd5b506101cd6107aa565b3480156102ec57600080fd5b506101cd6004356024356107ce565b34801561030757600080fd5b506101cd6107e4565b34801561031c57600080fd5b506101cd610808565b34801561033157600080fd5b506101cd61082c565b34801561034657600080fd5b506101cd610850565b34801561035b57600080fd5b506101cd600435610862565b34801561037357600080fd5b506101cd6004356024356044356064356084356109e1565b34801561039757600080fd5b506103a06109fa565b60408051600160a060020a039092168252519081900360200190f35b3480156103c857600080fd5b506101cd610a09565b3480156103dd57600080fd5b506101cd610a2d565b3480156103f257600080fd5b506101cd610a51565b34801561040757600080fd5b506101cd600435602435610a75565b34801561042257600080fd5b506101cd600435610a89565b34801561043a57600080fd5b506101cd600435602435610aa2565b34801561045557600080fd5b506101cd610c13565b34801561046a57600080fd5b506101cd610c37565b34801561047f57600080fd5b506101cd600435600160a060020a0360243516604435610c5b565b3480156104a657600080fd5b506101cd610e75565b3480156104bb57600080fd5b506101cd600435610e99565b3480156104d357600080fd5b506101cd610fdd565b3480156104e857600080fd5b5061050c600435602435604435606435600160a060020a036084351660a435611001565b6040805192835260208301919091528051918290030190f35b34801561053157600080fd5b506101cd61114f565b34801561054657600080fd5b506101cd600435611173565b34801561055e57600080fd5b506101cd611a23565b34801561057357600080fd5b506101cd600435602435604435606435611a47565b34801561059457600080fd5b506101cd611b8e565b3480156105a957600080fd5b506101cd611bb2565b7f434f4e54524143545f555345525f504f494e545300000000000000000000000081565b604080516fffffffffffffffffffffffffffffffff84168084038252915190819003602001902060009182918291908280806014840615156106215760009750879650869550610670565b6002840692506006840691508282141561063c576003820191505b50600a83068281141561064d576006015b81811415610659576004015b80600914156106665750600b5b8282829750975097505b50505050509250925092565b7f434f4e54524143545f47454e455f534349454e4345000000000000000000000081565b6000806106ad8484610aa2565b939093019392505050565b7f434f4e54524143545f57415445525f45524332305f544f4b454e00000000000081565b7f434f4e54524143545f474f4c445f45524332305f544f4b454e0000000000000081565b7f434f4e54524143545f52494e475f45524332305f544f4b454e0000000000000081565b7f55494e545f41554354494f4e5f4355540000000000000000000000000000000081565b6000807e040000000000000000000000000000000000000000000000000000000000008085049084041480156107a257507e0200000000000000000000000000000000000000000000000000000000000080850490840414155b949350505050565b7f434f4e54524143545f544f4b454e5f4c4f434154494f4e00000000000000000081565b506fffffffffffffffffffffffffffffffff1690565b7f434f4e54524143545f4b544f4e5f45524332305f544f4b454e0000000000000081565b7f434f4e54524143545f574f4f445f45524332305f544f4b454e0000000000000081565b7f434f4e54524143545f464952455f45524332305f544f4b454e0000000000000081565b6000805160206122f383398151915281565b600080610960834301610954454241325a6040516020018084600160a060020a0316600160a060020a03166c0100000000000000000000000002815260140183600160a060020a0316600160a060020a03166c0100000000000000000000000002815260140182815260200193505050506040516020818303038152906040526040518082805190602001908083835b602083106109115780518252601f1990920191602091820191016108f2565b5181516020939093036101000a600019018019909116921691909117905260405192018290039091209250505081151561094757fe5b049063ffffffff611bd616565b9063ffffffff611bd616565b604051602001808281526020019150506040516020818303038152906040526040518082805190602001908083835b602083106109ae5780518252601f19909201916020918201910161098f565b5181516020939093036101000a600019018019909116921691909117905260405192018290039091209695505050505050565b60006109f08686868686611be9565b9695505050505050565b600054600160a060020a031681565b7f434f4e54524143545f494e5445525354454c4c41525f454e434f44455200000081565b7f434f4e54524143545f5045545f4241534500000000000000000000000000000081565b7f434f4e54524143545f534f494c5f45524332305f544f4b454e0000000000000081565b6000610a818383611d59565b509392505050565b6000811515610a9a57506001610a9d565b50805b919050565b6000806000806000806000610ab789896105d6565b9197509550935085158015610aca575084155b8015610ad4575083155b15610ae25760009650610c07565b85600802608001610b3a6064600d896001018c811515610afe57fe5b6040805192909104825251908190036020019020811515610b1b57fe5b06896008028d9060020a900460ff1602811515610b3457fe5b04610a89565b9060020a02925084600802608001610b996064600d886001018c811515610b5d57fe5b6040805192909104825251908190036020019020811515610b7a57fe5b06811515610b8457fe5b04876008028c9060020a900460ff1602610a89565b9060020a02915083600802608001610bf86064600d876001018c811515610bbc57fe5b6040805192909104825251908190036020019020811515610bd957fe5b06811515610be357fe5b04866008028c9060020a900460ff1602610a89565b9060020a029050808284010196505b50505050505092915050565b7f434f4e54524143545f4f424a4543545f4f574e4552534849500000000000000081565b7f434f4e54524143545f544f4b454e5f555345000000000000000000000000000081565b60006801000000000000000068ff0000000000000000851604700100000000000000000000000000000000850460ff90811681871601907101000000000000000000000000000000000087041661010061ff008816040183808080866064810460070102858702670de0b6b3a764000002811515610cd557fe5b600080546040805160e260020a632ecd14d30281526000805160206122f383398151915260048201529051949093049750600160a060020a03169263bb34534c926024808201936020939283900390910190829087803b158015610d3857600080fd5b505af1158015610d4c573d6000803e3d6000fd5b505050506040513d6020811015610d6257600080fd5b5051604080517fa2de1409000000000000000000000000000000000000000000000000000000008152600160a060020a038d811660048301529151919092169163a2de14099160248083019260209291908290030181600087803b158015610dc957600080fd5b505af1158015610ddd573d6000803e3d6000fd5b505050506040513d6020811015610df357600080fd5b50519250600260001984018102900a69010000000000000000008c0460038281029190911661ffff16919091049250821115610e2e57600080fd5b606484830260050204840197508160031415610e505760646005850204880197505b610e5989611173565b905060646003820281018902049b9a5050505050505050505050565b7f434f4e54524143545f4552433732315f4252494447450000000000000000000081565b600080610f4543610954454241325a6040516020018084600160a060020a0316600160a060020a03166c0100000000000000000000000002815260140183600160a060020a0316600160a060020a03166c010000000000000000000000000281526014018281526020019350505050604051602081830303815290604052604051808280519060200190808383602083106109115780518252601f1990920191602091820191016108f2565b604051602001808281526020019150506040516020818303038152906040526040518082805190602001908083835b60208310610f935780518252601f199092019160209182019101610f74565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600190049050610fd281600085611f66565b601490069392505050565b7f434f4e54524143545f524556454e55455f504f4f4c000000000000000000000081565b600080546040805160e260020a632ecd14d30281526000805160206122f383398151915260048201529051839283928392600160a060020a039092169163bb34534c9160248082019260209290919082900301818787803b15801561106557600080fd5b505af1158015611079573d6000803e3d6000fd5b505050506040513d602081101561108f57600080fd5b5051604080517fa2de1409000000000000000000000000000000000000000000000000000000008152600160a060020a0389811660048301529151919092169163a2de14099160248083019260209291908290030181600087803b1580156110f657600080fd5b505af115801561110a573d6000803e3d6000fd5b505050506040513d602081101561112057600080fd5b5051905061112e8a8a611d59565b90945091506111408888848489611be9565b92505050965096945050505050565b7f434f4e54524143545f4c414e445f5245534f555243450000000000000000000081565b600080546040805160e260020a632ecd14d30281526000805160206122f383398151915260048201529051839283928392839283928392600160a060020a039092169163bb34534c9160248082019260209290919082900301818787803b1580156111dd57600080fd5b505af11580156111f1573d6000803e3d6000fd5b505050506040513d602081101561120757600080fd5b5051600080546040805160e260020a632ecd14d30281527f434f4e54524143545f474f4c445f45524332305f544f4b454e0000000000000060048201529051600160a060020a039485169463667c5d60948e949091169263bb34534c9260248083019360209383900390910190829087803b15801561128557600080fd5b505af1158015611299573d6000803e3d6000fd5b505050506040513d60208110156112af57600080fd5b50516040805160e060020a63ffffffff86160281526004810193909352600160a060020a0390911660248301525160448083019260209291908290030181600087803b1580156112fe57600080fd5b505af1158015611312573d6000803e3d6000fd5b505050506040513d602081101561132857600080fd5b5051600080546040805160e260020a632ecd14d30281526000805160206122f38339815191526004820152905161ffff9094169950600160a060020a039091169263bb34534c92602480840193602093929083900390910190829087803b15801561139257600080fd5b505af11580156113a6573d6000803e3d6000fd5b505050506040513d60208110156113bc57600080fd5b5051600080546040805160e260020a632ecd14d30281527f434f4e54524143545f574f4f445f45524332305f544f4b454e0000000000000060048201529051600160a060020a039485169463667c5d60948e949091169263bb34534c9260248083019360209383900390910190829087803b15801561143a57600080fd5b505af115801561144e573d6000803e3d6000fd5b505050506040513d602081101561146457600080fd5b50516040805160e060020a63ffffffff86160281526004810193909352600160a060020a0390911660248301525160448083019260209291908290030181600087803b1580156114b357600080fd5b505af11580156114c7573d6000803e3d6000fd5b505050506040513d60208110156114dd57600080fd5b5051600080546040805160e260020a632ecd14d30281526000805160206122f38339815191526004820152905161ffff9094169850600160a060020a039091169263bb34534c92602480840193602093929083900390910190829087803b15801561154757600080fd5b505af115801561155b573d6000803e3d6000fd5b505050506040513d602081101561157157600080fd5b5051600080546040805160e260020a632ecd14d30281527f434f4e54524143545f57415445525f45524332305f544f4b454e00000000000060048201529051600160a060020a039485169463667c5d60948e949091169263bb34534c9260248083019360209383900390910190829087803b1580156115ef57600080fd5b505af1158015611603573d6000803e3d6000fd5b505050506040513d602081101561161957600080fd5b50516040805160e060020a63ffffffff86160281526004810193909352600160a060020a0390911660248301525160448083019260209291908290030181600087803b15801561166857600080fd5b505af115801561167c573d6000803e3d6000fd5b505050506040513d602081101561169257600080fd5b5051600080546040805160e260020a632ecd14d30281526000805160206122f38339815191526004820152905161ffff9094169750600160a060020a039091169263bb34534c92602480840193602093929083900390910190829087803b1580156116fc57600080fd5b505af1158015611710573d6000803e3d6000fd5b505050506040513d602081101561172657600080fd5b5051600080546040805160e260020a632ecd14d30281527f434f4e54524143545f464952455f45524332305f544f4b454e0000000000000060048201529051600160a060020a039485169463667c5d60948e949091169263bb34534c9260248083019360209383900390910190829087803b1580156117a457600080fd5b505af11580156117b8573d6000803e3d6000fd5b505050506040513d60208110156117ce57600080fd5b50516040805160e060020a63ffffffff86160281526004810193909352600160a060020a0390911660248301525160448083019260209291908290030181600087803b15801561181d57600080fd5b505af1158015611831573d6000803e3d6000fd5b505050506040513d602081101561184757600080fd5b5051600080546040805160e260020a632ecd14d30281526000805160206122f38339815191526004820152905161ffff9094169650600160a060020a039091169263bb34534c92602480840193602093929083900390910190829087803b1580156118b157600080fd5b505af11580156118c5573d6000803e3d6000fd5b505050506040513d60208110156118db57600080fd5b5051600080546040805160e260020a632ecd14d30281527f434f4e54524143545f534f494c5f45524332305f544f4b454e0000000000000060048201529051600160a060020a039485169463667c5d60948e949091169263bb34534c9260248083019360209383900390910190829087803b15801561195957600080fd5b505af115801561196d573d6000803e3d6000fd5b505050506040513d602081101561198357600080fd5b50516040805160e060020a63ffffffff86160281526004810193909352600160a060020a0390911660248301525160448083019260209291908290030181600087803b1580156119d257600080fd5b505af11580156119e6573d6000803e3d6000fd5b505050506040513d60208110156119fc57600080fd5b505161ffff1691505084840183018201810160648104603c82040198975050505050505050565b7f55494e545f524546455245525f4355540000000000000000000000000000000081565b61ffff6901000000000000000000850416600080611a656033610e99565b915060088210801590611a785750601082105b15611a955761ffff69010000000000000000008704169250611abe565b6012821015611aa75760009250611abe565b61ffff690100000000000000000087041692909217915b600085118015611ace5750600084115b15611b84576003841015611b1e57600a611ae86017610e99565b1015611b045760018503600202849060020a0283179250611b19565b60018503600202600185039060020a02831792505b611b84565b8360031415611b8457611b31601d610e99565b90506005811015611b5157600260001986018102900a9290921791611b84565b600f811015611b71576001850360020260029060020a0283179250611b84565b6001850360020260039060020a02831792505b5050949350505050565b7f55494e545f544f4b454e5f4f464645525f43555400000000000000000000000081565b7f434f4e54524143545f4449564944454e44535f504f4f4c00000000000000000081565b81810182811015611be357fe5b92915050565b6000603c600885020181808080806082861115611c0557608295505b85611c10600d610862565b811515611c1957fe5b0694506005851080611c315750600560048702048510155b15611c3d576003860494505b600585870303611c4d6029610862565b811515611c5657fe5b0693506005841015611c6b5760028587030493505b610100858703859003028501620100008502019650600392505b600c831015611d195785611c9b84601301610862565b811515611ca457fe5b06915060088310158015611cb95750600a8311155b15611cc357611d0e565b8260031480611cd25750826004145b15611cf3576032821015611ce557603291505b6041821115611cf357604191505b811515611cff57600191505b82600802829060020a02870196505b600190920191611c85565b6801000000000000000086029690960195611d368c8c8b8b611a47565b61ffff16690100000000000000000002969096019b9a5050505050505050505050565b600080611d646122b3565b611d6c6122b3565b611d746122b3565b60008080807e04000000000000000000000000000000000000000000000000000000000000808c04908b04148015611dd057507e02000000000000000000000000000000000000000000000000000000000000808c04908b0414155b1515611e3d57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601560248201527f746865792063616e742068617665206261626965730000000000000000000000604482015290519081900360640190fd5b7fffff0000000000000000000000000000000000000000000000000000000000008b169350600a611e6e6039610e99565b1015611e9a57897fffff0000000000000000000000000000000000000000000000000000000000001693505b600091505b600c821015611f5657620fffff6014830260020a8c04168783600c8110611ec257fe5b6020020152620fffff6014830260020a8b04168683600c8110611ee157fe5b6020020152611f118783600c8110611ef557fe5b60200201518784600c8110611f0657fe5b602002015184611f88565b8684600c8110611f1d57fe5b6020020191909152928301929050601482028583600c8110611f3b57fe5b60200201519060020a02840193508180600101925050611e9f565b5091999098509650505050505050565b8101621000006107fd939093026001016305f5e1000292909204919091020190565b600080611f936122d3565b611f9b6122d3565b611fa36122d3565b60008080808080805b6004871015611ffe57866005028f9060020a9004601f168a88600481101515611fd157fe5b6020020152601f6005880260020a8f0416898860048110611fee57fe5b6020020152600190960195611fac565b600395505b60008611156120e757600561201e601f888002028f01610e99565b1015612074578960001987016004811061203457fe5b6020020151945089866004811061204757fe5b60200201518a60001988016004811061205c57fe5b6020020152848a876004811061206e57fe5b60200201525b600f6120866025888002028f01610e99565b106120db578860001987016004811061209b57fe5b602002015194508886600481106120ae57fe5b6020020151896000198801600481106120c357fe5b6020020152848987600481106120d557fe5b60200201525b60001990950194612003565b600393505b600084111561217157600a6121076027868002028f01610e99565b106121225788846004811061211857fe5b6020020151612134565b89846004811061212e57fe5b60200201515b88856004811061214057fe5b60200201526005840288856004811061215557fe5b60200201519060020a028c019b508380600190039450506120ec565b88518a511015612182578851612185565b89515b89518b51919450101561219957885161219c565b89515b915081830360011480156121b1575060028206155b1561226457601083116121c55760026121c8565b60055b905060646121d6600b610e99565b10156122395760106002830401808952600f10156121f95760018b019a50612234565b87516017101561220e5760028b019a50612234565b8751601b10156122235760038b019a50612234565b8751601d10156122345760048b019a505b61225f565b600260140461224d8e602b02603d01610e99565b1061225957885161225c565b89515b88525b61228a565b60026014046122788e602b02603d01610e99565b10612284578851612287565b89515b88525b87519b909b019a600a8d14156122a1578a6002029a505b50505050505050505050935093915050565b61018060405190810160405280600c906020820280388339509192915050565b60806040519081016040528060049060208202803883395091929150505600434f4e54524143545f4c414e445f424153450000000000000000000000000000a165627a7a72305820d6f4fc767267d0554933c45a81cbfd935b67b330a192bf572da463db0eb7df300029 'GeneScienceV8(address)' $SETTINGSREGISTRY)


geneId=$(seth --to-bytes32 $(seth --from-ascii "CONTRACT_GENE_SCIENCE"))
seth send $SETTINGSREGISTRY "setAddressProperty(bytes32,address)" $geneId $GENESCIENCEV8
addAddress "GENESCIENCEV8" $GENESCIENCEV8
